(()=>{"use strict";const t="todo.projects",e="todo.selectedProjectId";let o=JSON.parse(localStorage.getItem(t))||[],n=localStorage.getItem(e);function d(){return o}function c(){return n}const a=document.querySelector("#projects-list"),r=document.querySelector(".todos-container"),s=document.querySelector(".project-header"),i=document.querySelector("#todos-list");function l(){document.getElementById("add-todo-form-container").style.display=""}function u(){document.getElementById("add-todo-form").reset(),document.getElementById("add-todo-form-container").style.display="none"}function m(){document.getElementById("new-project-form-container").style.display=""}function p(){document.getElementById("new-project-form").reset(),document.getElementById("new-project-form-container").style.display="none"}function f(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function y(){f(a),d().forEach((t=>{const e=document.createElement("div");e.dataset.projectId=t.id,e.classList.add("project-name"),e.textContent=t.name,t.id===c()&&e.classList.add("selected-project");const o=document.createElement("button");o.classList.add("delete-project-button"),o.textContent="X",e.appendChild(o),a.appendChild(e)}));const t=d().find((t=>t.id===c()));t?(r.style.display="",s.textContent=t.name,f(i),function(t){(function(t){return t.todos})(t).forEach((t=>{const e=document.createElement("div");e.dataset.todoId=t.id,e.classList.add("new-todo"),i.appendChild(e);const o=document.createElement("div");o.classList.add("icons-wrapper"),e.appendChild(o);const n=document.createElement("i");n.classList.add("fa-solid"),n.classList.add("fa-flag"),n.classList.add(t.priority.toLowerCase()),o.appendChild(n);const d=document.createElement("i");d.classList.add("delete-todo-button"),d.classList.add("fa-solid"),d.classList.add("fa-trash-can"),o.appendChild(d);const c=document.createElement("div");c.classList.add("new-todo-wrapper"),e.appendChild(c);const a=document.createElement("p");a.classList.add("todo-title"),a.textContent=t.title,c.appendChild(a);const r=document.createElement("p");r.classList.add("todo-description"),r.textContent=t.description,c.appendChild(r);const s=document.createElement("p");s.classList.add("todo-duedate"),s.textContent=t.dueDate,c.appendChild(s)}))}(t)):r.style.display="none"}function E(){localStorage.setItem(t,JSON.stringify(o)),localStorage.setItem(e,n),y()}document.querySelector(".create-project-button").addEventListener("click",m),document.querySelector(".cancel-project-button").addEventListener("click",p),document.querySelector("#new-project-form").addEventListener("submit",(t=>{t.preventDefault(),function(){const t=document.querySelector("#project-name-input").value;if(null==t||""===t)return;const e=(n=t,{id:Date.now().toString(),name:n,todos:[]});var n;o.push(e),E(),p()}()})),document.querySelector("#projects-list").addEventListener("click",(t=>{var e;t.target.classList.contains("project-name")?(e=t.target.dataset.projectId,n=e,E()):t.target.classList.contains("delete-project-button")&&(function(t){o=o.filter((e=>e.id!==t)),E()}(t.target.parentElement.dataset.projectId),t.target.parentElement.dataset.projectId===c()&&(n=null))})),document.querySelector(".create-todo-button").addEventListener("click",l),document.querySelector(".cancel-todo-button").addEventListener("click",u),document.querySelector("#add-todo-form").addEventListener("submit",(t=>{t.preventDefault(),function(){const t=(e=document.querySelector("#title").value,d=document.querySelector("#description").value,c=document.querySelector("#duedate").value,a=document.querySelector("#priority").value,{id:Date.now().toString(),title:e,description:d,dueDate:c,priority:a});var e,d,c,a,r;r=t,o.find((t=>t.id===n)).todos.push(r),E(),u()}()})),document.querySelector("#todos-list").addEventListener("click",(t=>{t.target.classList.contains("delete-todo-button")&&function(t){const e=o.find((t=>t.id===n));e.todos=e.todos.filter((e=>e.id!==t)),E()}(t.target.parentElement.parentElement.dataset.todoId)})),y()})();