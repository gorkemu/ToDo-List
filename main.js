(()=>{"use strict";const t="todo.projects",e="todo.selectedProjectId";let o=JSON.parse(localStorage.getItem(t))||[],n=localStorage.getItem(e);function d(){return o}function c(){return n}const r=document.querySelector("#projects-list"),a=document.querySelector(".todos-container"),i=document.querySelector(".project-header"),l=document.querySelector("#todos-list");function s(){document.getElementById("add-todo-form-container").style.display=""}function u(){document.getElementById("add-todo-form").reset(),document.getElementById("add-todo-form-container").style.display="none"}function m(){document.getElementById("new-project-form-container").style.display=""}function p(){document.getElementById("new-project-form").reset(),document.getElementById("new-project-form-container").style.display="none"}function y(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function f(){y(r),d().forEach((t=>{const e=document.createElement("div");e.dataset.projectId=t.id,e.classList.add("project-name"),e.textContent=t.name,t.id===c()&&e.classList.add("selected-project");const o=document.createElement("button");o.classList.add("delete-project-button"),o.textContent="X",e.appendChild(o),r.appendChild(e)}));const t=d().find((t=>t.id===c()));t?(a.style.display="",i.textContent=t.name,y(l),function(t){(function(t){return t.todos})(t).forEach((t=>{const e=document.createElement("div");e.dataset.todoId=t.id,e.classList.add("new-todo"),l.appendChild(e);const o=document.createElement("p");o.classList.add("todo-title"),o.textContent=t.title,e.appendChild(o);const n=document.createElement("p");n.classList.add("todo-description"),n.textContent=t.description,e.appendChild(n);const d=document.createElement("p");d.classList.add("todo-duedate"),d.textContent=t.dueDate,e.appendChild(d);const c=document.createElement("p");c.classList.add("todo-priority"),c.textContent=t.priority,e.appendChild(c);const r=document.createElement("button");r.classList.add("delete-todo-button"),r.textContent="X",e.appendChild(r)}))}(t)):a.style.display="none"}function E(){localStorage.setItem(t,JSON.stringify(o)),localStorage.setItem(e,n),f()}document.querySelector(".create-project-button").addEventListener("click",m),document.querySelector(".cancel-project-button").addEventListener("click",p),document.querySelector("#new-project-form").addEventListener("submit",(t=>{t.preventDefault(),function(){const t=document.querySelector("#project-name-input").value;if(null==t||""===t)return;const e=(n=t,{id:Date.now().toString(),name:n,todos:[]});var n;o.push(e),E(),p()}()})),document.querySelector("#projects-list").addEventListener("click",(t=>{var e;t.target.classList.contains("project-name")?(e=t.target.dataset.projectId,n=e,E()):t.target.classList.contains("delete-project-button")&&(function(t){o=o.filter((e=>e.id!==t)),E()}(t.target.parentElement.dataset.projectId),t.target.parentElement.dataset.projectId===c()&&(n=null))})),document.querySelector(".create-todo-button").addEventListener("click",s),document.querySelector(".cancel-todo-button").addEventListener("click",u),document.querySelector("#add-todo-form").addEventListener("submit",(t=>{t.preventDefault(),function(){const t=(e=document.querySelector("#title").value,d=document.querySelector("#description").value,c=document.querySelector("#duedate").value,r=document.querySelector("#priority").value,{id:Date.now().toString(),title:e,description:d,dueDate:c,priority:r});var e,d,c,r,a;a=t,o.find((t=>t.id===n)).todos.push(a),E(),u()}()})),document.querySelector("#todos-list").addEventListener("click",(t=>{t.target.classList.contains("delete-todo-button")&&function(t){const e=o.find((t=>t.id===n));e.todos=e.todos.filter((e=>e.id!==t)),E()}(t.target.parentElement.dataset.todoId)})),document.querySelectorAll(".edit-todo-button"),f()})();