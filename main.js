(()=>{"use strict";const e="todo.projects",t="todo.selectedProjectId";let o=JSON.parse(localStorage.getItem(e))||[],n=localStorage.getItem(t);function c(){return o}function d(){return n}function r(){document.getElementById("add-todo-form-container").style.display=""}function l(){document.getElementById("add-todo-form").reset(),document.getElementById("add-todo-form-container").style.display="none"}function a(){document.getElementById("new-project-form-container").style.display=""}function i(){document.getElementById("new-project-form").reset(),document.getElementById("new-project-form-container").style.display="none"}function s(e){for(;e.firstChild;)e.removeChild(e.firstChild)}const u=document.querySelector("#projects-list"),m=document.querySelector(".todos-container"),p=document.querySelector(".project-header");function y(){s(u),c().forEach((e=>{const t=document.createElement("div");t.dataset.projectId=e.id,t.classList.add("project-name"),t.textContent=e.name,e.id===d()&&t.classList.add("selected-project");const o=document.createElement("button");o.classList.add("delete-project-button"),o.textContent="X",t.appendChild(o),u.appendChild(t)}));const e=c().find((e=>e.id===d()));e?(m.style.display="",p.textContent=e.name):m.style.display="none"}function f(){localStorage.setItem(e,JSON.stringify(o)),localStorage.setItem(t,n),y()}document.querySelector(".todos-list");let S=[];document.querySelector(".create-project-button").addEventListener("click",a),document.querySelector(".cancel-project-button").addEventListener("click",i),document.querySelector("#new-project-form").addEventListener("submit",(e=>{e.preventDefault(),function(){const e=document.querySelector("#project-name-input").value;if(null==e||""===e)return;const t=(n=e,{id:Date.now().toString(),name:n,todos:[]});var n;o.push(t),f(),i()}()})),document.querySelector("#projects-list").addEventListener("click",(e=>{var t;e.target.classList.contains("project-name")?(t=e.target.dataset.projectId,n=t,f()):e.target.classList.contains("delete-project-button")&&(function(e){o=o.filter((t=>t.id!==e)),f()}(e.target.parentElement.dataset.projectId),e.target.parentElement.dataset.projectId===d()&&(n=null))})),document.querySelector(".create-todo-button").addEventListener("click",r),document.querySelector(".cancel-todo-button").addEventListener("click",l),document.querySelector("#add-todo-form").addEventListener("submit",(e=>{e.preventDefault(),function(){const e={title:document.querySelector("#title").value,description:document.querySelector("#description").value,dueDate:document.querySelector("#duedate").value,priority:document.querySelector("#priority").value};S.push(e),function(){const e=document.querySelector(".todos-list");s(e),S.forEach((t=>{const o=document.createElement("div");o.classList.add("new-todo"),e.appendChild(o);const n=document.createElement("p");n.classList.add("todo-title"),n.textContent=t.title,o.appendChild(n);const c=document.createElement("p");c.classList.add("todo-description"),c.textContent=t.description,o.appendChild(c);const d=document.createElement("p");d.classList.add("todo-duedate"),d.textContent=t.dueDate,o.appendChild(d);const r=document.createElement("p");r.classList.add("todo-priority"),r.textContent=t.priority,o.appendChild(r)}))}(),l()}()})),document.querySelectorAll(".delete-todo-button"),document.querySelectorAll(".edit-todo-button"),y()})();