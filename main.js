(()=>{"use strict";function t(){document.getElementById("add-todo-form-container").style.display=""}function e(){document.getElementById("add-todo-form").reset(),document.getElementById("add-todo-form-container").style.display="none"}function o(){document.getElementById("new-project-form-container").style.display=""}function n(){document.getElementById("new-project-form").reset(),document.getElementById("new-project-form-container").style.display="none"}function c(t){for(;t.firstChild;)t.removeChild(t.firstChild)}const d=document.querySelector("#projects-list"),r="todo.projects",l="todo.selectedProjectId";let a=JSON.parse(localStorage.getItem(r))||[],i=localStorage.getItem(l);function s(){c(d),a.forEach((t=>{const e=document.createElement("div");e.dataset.projectId=t.id,e.classList.add("project-name"),e.textContent=t.name,t.id===i&&e.classList.add("selected-project");const o=document.createElement("button");o.classList.add("delete-project-button"),o.textContent="X",e.appendChild(o),d.appendChild(e)}))}function u(){localStorage.setItem(r,JSON.stringify(a)),localStorage.setItem(l,i),s()}let m=[];(()=>{document.querySelector(".create-project-button").addEventListener("click",o),document.querySelector(".cancel-project-button").addEventListener("click",n),document.querySelector("#new-project-form").addEventListener("submit",(t=>{t.preventDefault(),function(){const t=document.querySelector("#project-name-input").value;if(null==t||""===t)return;const e=(o=t,{id:Date.now().toString(),name:o,todos:[]});var o;a.push(e),u(),n()}()}));const d=document.querySelector("#projects-list");d.addEventListener("click",(t=>function(t){t.target.classList.contains("project-name")&&(i=t.target.dataset.projectId,u())}(t))),d.addEventListener("click",(t=>function(t){t.target.classList.contains("delete-project-button")&&(a=a.filter((e=>e.id!==t.target.parentElement.dataset.projectId)),u())}(t))),document.querySelector(".create-todo-button").addEventListener("click",t),document.querySelector(".cancel-todo-button").addEventListener("click",e),document.querySelector("#add-todo-form").addEventListener("submit",(t=>{t.preventDefault(),function(){const t={title:document.querySelector("#title").value,description:document.querySelector("#description").value,dueDate:document.querySelector("#duedate").value,priority:document.querySelector("#priority").value};m.push(t),function(){const t=document.querySelector(".todos-list");c(t),m.forEach((e=>{const o=document.createElement("div");o.classList.add("new-todo"),t.appendChild(o);const n=document.createElement("p");n.classList.add("todo-title"),n.textContent=e.title,o.appendChild(n);const c=document.createElement("p");c.classList.add("todo-description"),c.textContent=e.description,o.appendChild(c);const d=document.createElement("p");d.classList.add("todo-duedate"),d.textContent=e.dueDate,o.appendChild(d);const r=document.createElement("p");r.classList.add("todo-priority"),r.textContent=e.priority,o.appendChild(r)}))}(),e()}()})),document.querySelectorAll(".delete-todo-button"),document.querySelectorAll(".edit-todo-button")})(),s()})();